<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ my_username }} Games Per Month</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='/images/beaker.ico')}}">
    
    <!-- Dark Theme CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/games_per_month.css')}}">
    
</head>
<body>
    <div class="page-container">
        <h1>{{ my_username }} Games Played Per Month</h1>
        <canvas id="gamesChart"></canvas>

        <h2>Monthly Heatmap</h2>
        <table>
            <thead>
                <tr>
                    <th>Year</th>
                    <th>Jan</th><th>Feb</th><th>Mar</th><th>Apr</th>
                    <th>May</th><th>Jun</th><th>Jul</th><th>Aug</th>
                    <th>Sep</th><th>Oct</th><th>Nov</th><th>Dec</th>
                </tr>
            </thead>
            <tbody>
                {% for year, months_dict in results.items() %}
                <tr>
                    <td>{{ year }}</td>
                    {% for m in range(1, 13) %}
                        {% set count = months_dict[m] %}
                        {% set ratio = count / max_games %}
                        {% if ratio > 1 %}{% set ratio = 1 %}{% endif %}
                        {% set red = (255 * ratio)|round %}
                        {% set green = (200 * (1-ratio))|round %}
                        <td style="background-color: rgba({{ red }}, {{ green }}, 100, 0.3)">
                            {{ count }}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- JS -->
        <!-- Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- Common Dark Theme Options -->
        <script src="{{ url_for('static', filename='scripts/common_charts.js') }}"></script>

        <!-- Data from Flask -->
        <script>
            const labels = {{ months|tojson }};
            const data = {{ counts|tojson }};
        </script>

        <!-- Page Source -->
        <script src="{{ url_for('static', filename='scripts/games_per_month.js')}}"></script>

    </div>
    <p style="text-align:center;"><a href="{{ url_for('dashboard') }}">Back to Home</a></p>
</body>
</html>

